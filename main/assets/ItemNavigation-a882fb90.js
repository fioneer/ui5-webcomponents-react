import{b as c,c as I,d,e as l,f as u,g as m,h as g,j as f}from"./Icons-234bf59e.js";import{o as x,i as w}from"./UI5Element-11982a12.js";var a;(function(n){n.Auto="Auto",n.Vertical="Vertical",n.Horizontal="Horizontal",n.Paging="Paging"})(a||(a={}));const s=a;var _;(function(n){n.Static="Static",n.Cyclic="Cyclic"})(_||(_={}));const r=_;class p{constructor(e,t){if(!e.isUI5Element)throw new Error("The root web component must be a UI5 Element instance");if(this.rootWebComponent=e,this.rootWebComponent.addEventListener("keydown",this._onkeydown.bind(this)),this.rootWebComponent._onComponentStateFinalized=()=>{this._init()},typeof t.getItemsCallback!="function")throw new Error("getItemsCallback is required");this._getItems=t.getItemsCallback,this._currentIndex=t.currentIndex||0,this._rowSize=t.rowSize||1,this._behavior=t.behavior||r.Static,this._navigationMode=t.navigationMode||s.Auto,this._affectedPropertiesNames=t.affectedPropertiesNames||[],this._skipItemsSize=t.skipItemsSize||null}setCurrentItem(e){const t=this._getItems().indexOf(e);if(t===-1){console.warn("The provided item is not managed by ItemNavigation",e);return}this._currentIndex=t,this._applyTabIndex()}setRowSize(e){this._rowSize=e}_init(){this._getItems().forEach((e,t)=>{e._tabIndex=t===this._currentIndex?"0":"-1"})}_onkeydown(e){if(!this._canNavigate())return;const t=this._navigationMode===s.Horizontal||this._navigationMode===s.Auto,i=this._navigationMode===s.Vertical||this._navigationMode===s.Auto,h=this.rootWebComponent.effectiveDir==="rtl";if(h&&c(e)&&t)this._handleRight();else if(h&&I(e)&&t)this._handleLeft();else if(c(e)&&t)this._handleLeft();else if(I(e)&&t)this._handleRight();else if(d(e)&&i)this._handleUp();else if(l(e)&&i)this._handleDown();else if(u(e))this._handleHome();else if(m(e))this._handleEnd();else if(g(e))this._handlePageUp();else if(f(e))this._handlePageDown();else return;e.preventDefault(),this._applyTabIndex(),this._focusCurrentItem()}_handleUp(){const e=this._getItems().length;if(this._currentIndex-this._rowSize>=0){this._currentIndex-=this._rowSize;return}if(this._behavior===r.Cyclic){const t=this._currentIndex%this._rowSize,i=t===0?this._rowSize-1:t-1,h=Math.ceil(e/this._rowSize);let o=i+(h-1)*this._rowSize;o>e-1&&(o-=this._rowSize),this._currentIndex=o}else this._currentIndex=0}_handleDown(){const e=this._getItems().length;if(this._currentIndex+this._rowSize<e){this._currentIndex+=this._rowSize;return}if(this._behavior===r.Cyclic){const i=(this._currentIndex%this._rowSize+1)%this._rowSize;this._currentIndex=i}else this._currentIndex=e-1}_handleLeft(){const e=this._getItems().length;if(this._currentIndex>0){this._currentIndex-=1;return}this._behavior===r.Cyclic&&(this._currentIndex=e-1)}_handleRight(){const e=this._getItems().length;if(this._currentIndex<e-1){this._currentIndex+=1;return}this._behavior===r.Cyclic&&(this._currentIndex=0)}_handleHome(){const e=this._rowSize>1?this._rowSize:this._getItems().length;this._currentIndex-=this._currentIndex%e}_handleEnd(){const e=this._rowSize>1?this._rowSize:this._getItems().length;this._currentIndex+=e-1-this._currentIndex%e}_handlePageUp(){this._rowSize>1||this._handlePageUpFlat()}_handlePageDown(){this._rowSize>1||this._handlePageDownFlat()}_handlePageUpFlat(){if(this._skipItemsSize===null){this._currentIndex-=this._currentIndex;return}this._currentIndex+1>this._skipItemsSize?this._currentIndex-=this._skipItemsSize:this._currentIndex-=this._currentIndex}_handlePageDownFlat(){if(this._skipItemsSize===null){this._currentIndex=this._getItems().length-1;return}this._getItems().length-this._currentIndex-1>this._skipItemsSize?this._currentIndex+=this._skipItemsSize:this._currentIndex=this._getItems().length-1}_applyTabIndex(){const e=this._getItems();for(let t=0;t<e.length;t++)e[t]._tabIndex=t===this._currentIndex?"0":"-1";this._affectedPropertiesNames.forEach(t=>{const i=this.rootWebComponent[t];this.rootWebComponent[t]=Array.isArray(i)?[...i]:{...i}})}_focusCurrentItem(){const e=this._getCurrentItem();e&&e.focus({focusVisible:!0})}_canNavigate(){const e=this._getCurrentItem(),t=x();return e&&e===t}_getCurrentItem(){const e=this._getItems();if(!e.length)return;for(;this._currentIndex>=e.length;)this._currentIndex-=this._rowSize;this._currentIndex<0&&(this._currentIndex=0);const t=e[this._currentIndex];if(!t)return;if(w(t))return t.getFocusDomRef();const i=this.rootWebComponent.getDomRef();if(i&&t.id)return i.querySelector(`#${t.id}`)}}export{p as I,s as N,r as a};
//# sourceMappingURL=ItemNavigation-a882fb90.js.map
